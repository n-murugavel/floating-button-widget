!function(){var e=window,t=document;({userAgent:navigator.userAgent,noop:function(){},init:function(e){this.loadStyleSheet(this.getAppLocation()+"/dist/css/widget-app.min.css",function(){this.injectWidgetTemplate(),this.bindEvents()}.bind(this),this)},injectWidgetTemplate:function(){t.body.appendChild(this.getWidgetTemplate()),t.body.appendChild(this.getModalTemplate())},bindEvents:function(){var e=t.querySelector(".ffw-btn");e&&e.addEventListener("click",function(t){this.toggleClass(e,"active")}.bind(this));var n=t.querySelector(".ffw-comments");n&&n.addEventListener("click",function(){this.toggleClass(e,"active"),this.openFeedbackForm()}.bind(this))},bindFbFormEvents:function(){var e=t.querySelector(".ffw-form-cancel-btn");e&&e.addEventListener("click",function(e){e.preventDefault(),this.hideModalWindow()}.bind(this))},openFeedbackForm:function(){t.querySelector(".ffw-modal-content").appendChild(this.getFeedbackTemplate()),this.bindFbFormEvents(),this.showModalWindow()},getAppLocation:function(){return e.location.protocol+"//"+e.location.host},loadStyleSheet:function(e,n,a){var s,i,l=t.head,o=this.generateElement("link",[["type","text/css"],["rel","stylesheet"],["href",e]]);"sheet"in o?(s="sheet",i="cssRules"):(s="styleSheet",i="rules");var r=setInterval(function(){try{console.log("setInterval called while loading stylesheet"),o[s]&&o[s][i].length&&(clearInterval(r),clearTimeout(d),n.call(a||window,!0,o))}catch(e){}},10),d=setTimeout(function(){console.log("setTimeout called while loading stylesheet"),clearInterval(r),clearTimeout(d),l.removeChild(o),n.call(a||window,!1,o)},15e3);return l.appendChild(o),o},getWidgetTemplate:function(){var e=this.generateElement("div",[["class","ffw-container"]]),t=this.generateElement("a",[["class","ffw-btn"],["href","javascript:void(0);"]]);t.appendChild(this.generateElement("i",[["class","fa fa-info fw"]])),e.appendChild(t);var n=this.generateElement("ul",[["class","ffw-ops"]]),a=this.generateElement("li",[["class","ffw-op"]]),s=this.generateElement("a",[["href","javascript:void(0);"]]),i=this.generateElement("span",[["class","ffw-op-btn-tooltip"]]),l=a.cloneNode(!1),o=s.cloneNode(!1);o.setAttribute("class","ffw-op-btn green ffw-contact"),o.appendChild(this.generateElement("i",[["class","fa fa-user fw"]]));var r=i.cloneNode(!1);r.innerHTML="Contact Us",l.appendChild(o),l.appendChild(r),n.appendChild(l);var d=a.cloneNode(!1),c=s.cloneNode(!1);c.setAttribute("class","ffw-op-btn red ffw-report"),c.appendChild(this.generateElement("i",[["class","fa fa-bug fw"]]));var f=i.cloneNode(!1);f.innerHTML="Report Problems",d.appendChild(c),d.appendChild(f),n.appendChild(d);var h=a.cloneNode(!1),p=s.cloneNode(!1);p.setAttribute("class","ffw-op-btn blue ffw-comments"),p.appendChild(this.generateElement("i",[["class","fa fa-bullhorn fw"]]));var u=i.cloneNode(!1);return u.innerHTML="Share Feedback",h.appendChild(p),h.appendChild(u),n.appendChild(h),e.appendChild(n),e},getModalTemplate:function(){var e=this.generateElement("div",[["class","ffw-modal-content"]]),t=this.generateElement("div",[["class","ffw-modal-container"]]);t.appendChild(e);var n=this.generateElement("div",[["class","ffw-modal"]]);return n.appendChild(t),n},getFeedbackTemplate:function(){var e=this.generateElement("div",[["class","ffw-form"]]),t=this.generateElement("h4",[["class","ffw-form-header"]]);t.innerHTML="Share Feedback",e.appendChild(t);var n=this.generateElement("div",[["class","ffw-form-field"]]),a=this.generateElement("input",[["class","ffw-form-text-input"],["type","text"],["maxlength","50"]]),s=n.cloneNode(!1),i=a.cloneNode(!1);i.setAttribute("name","ffw-form-name"),i.setAttribute("placeholder","Name"),s.appendChild(i),e.appendChild(s);var l=n.cloneNode(!1);l.setAttribute("style","text-align: center;");var o=this.generateElement("button",[["class","ffw-button ffw-form-submit-btn"],["type","button"]]);o.innerHTML="Submit";var r=this.generateElement("button",[["class","ffw-button ffw-form-cancel-btn"],["type","button"]]);return r.setAttribute("style","margin-left:10px;"),r.innerHTML="Cancel",l.appendChild(o),l.appendChild(r),e.appendChild(l),e},generateElement:function(e,n){var a;return e&&(a=t.createElement(e),n.forEach(function(e){var t=e.length>0?e[0]:"",n=e.length>1?e[1]:"";t&&a.setAttribute(t,n)},this)),a},getJSONToURLEncodedString:function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length>0&&(t+="&"),t+=encodeURI(n+"="+e[n]));return t},callAjax:function(e){var t=e.method||"GET",n=e.url,a=e.success||this.noop,s=e.error||this.noop,i=e.params||null,l=e.contentType||"application/x-www-form-urlencoded";"application/json"===l&&i&&"string"!=typeof i&&(i=JSON.stringify(i));var o=new XMLHttpRequest;return o.open(t,n,!0),o.setRequestHeader("Content-Type",l),o.onreadystatechange=function(){o.readyState===XMLHttpRequest.DONE&&200===o.status?a(o.responseText):s(o.responseText,o.status)},o.send(i),o},showModalWindow:function(){var e=t.querySelector(".ffw-modal");e.style.visibility="visible",e.style.opacity="1",e.addEventListener("click",function(e){e.preventDefault(),(this.hasClass(e.target,"ffw-modal-container")||this.hasClass(e.target,"ffw-modal"))&&this.hideModalWindow()}.bind(this))},hideModalWindow:function(){var e=t.querySelector(".ffw-modal");e.style.visibility="hidden",e.style.opacity="0",setTimeout(function(){t.querySelector(".ffw-modal-content").innerHTML=""},1e3)},hasClass:function(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},addClass:function(e,t){e.classList?e.classList.add(t):this.hasClass(e,t)||(e.className+=" "+t)},removeClass:function(e,t){if(e.classList)e.classList.remove(t);else if(this.hasClass(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")}},toggleClass:function(e,t){this.hasClass(e,t)?this.removeClass(e,t):this.addClass(e,t)}}).init()}();